<div class="container-fluid">
  <div class="row g-0 ">
    <div class="col-5 g-0 ">
      <h4>Team / {{ (currentTeam$ | async)?.name }}</h4>
      <h2>List</h2>
    </div>
  </div>
  <div class="row g-0 justify-content-center  ">
    <div class="col-10 g-0 BaseTable">
      <div class="Table">
        <form [formGroup]="form" id="test1">
          <table mat-table [dataSource]="dataSource" formArrayName="PTasks">

            <tr mat-header-row *matHeaderRowDef="displayColumns;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; let i = index; columns: displayColumns;"></tr>

            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> id </th>
              <td class="idCell" (change)="testChange(row,index)" mat-cell *matCellDef="let row; let index = index"
                [formGroupName]="index">
                <a class="link-secondary">{{row.controls['id'].value}}</a>
              </td>
            </ng-container>

            <ng-container matColumnDef="startDate">
              <th mat-header-cell *matHeaderCellDef> startDate</th>
              <td (change)="testChange(row,index)" mat-cell *matCellDef="let row; let index = index"
                [formGroupName]="index">

                <mat-form-field class="startDatefield" appearance="outline">

                  <input matInput [matDatepicker]="picker" formControlName="startDate">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>

                  <!-- <input  matInput formControlName="startDate"> -->


                </mat-form-field>

                <!-- <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle> -->
                <!-- <div class="d-flex kurka" > -->
              </td>
            </ng-container>

            <ng-container matColumnDef="endDate">
              <th mat-header-cell *matHeaderCellDef> endDate4 </th>
              <td (change)="testChange(row,index)" mat-cell *matCellDef="let row; let index = index"
                [formGroupName]="index">
                <mat-form-field class="endDatefield" appearance="outline">
                  <input matInput [matDatepicker]="picker" formControlName="endDate">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef> title </th>
              <td (change)="testChange(row,index)" mat-cell *matCellDef="let row; let index = index"
                [formGroupName]="index">

                <mat-form-field class="classInput" appearance="outline">
                  <input matInput type="text" formControlName="title">
                </mat-form-field>
              </td>
            </ng-container>


            <ng-container matColumnDef="priorityId">
              <th mat-header-cell *matHeaderCellDef> priorityId </th>
              <td mat-cell *matCellDef="let row; let index = index" [formGroupName]="index">
                <mat-form-field class="priorityId" appearance="outline">
                  <mat-select (selectionChange)="testChange(row,index)" [formControl]="row.controls['priorityId']">
                    <mat-select-trigger>
                      <i [ngClass]="GetIconPriorityId(row.controls['priorityId'].value)"></i>
                    </mat-select-trigger>

                    <mat-option value="3"><i class="fa-solid fa-angle-up fa-xl"></i> High</mat-option>
                    <mat-option value="2"><i class="fa-solid fa-bars fa-xl"></i> Medium</mat-option>
                    <mat-option value="1"><i class="fa-solid fa-angle-down fa-xl"></i> Low</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="stateId">
              <th mat-header-cell *matHeaderCellDef> stateId </th>
              <td (change)="testChange(row,index)" mat-cell *matCellDef="let row; let index = index"
                [formGroupName]="index">

                <mat-form-field class="stateIdField" appearance="outline">
                  <mat-select (selectionChange)="testChange(row,index)" formControlName="stateId">

                    <mat-select-trigger>

                      <span [ngClass]="GetIconStateId(row.controls['stateId'].value)">
                        {{ StateTable[ row.controls['stateId'].value?.[0] - 1] }}
                        <!-- {{row.controls['stateId'].value?.[0] || ''}} -->
                      </span>
                    </mat-select-trigger>

                    <mat-option value="1"> <span class="ToDo"> To Do</span> </mat-option>
                    <mat-option value="2"> <span class="InProgress">In Progress</span> </mat-option>
                    <mat-option value="3"> <span class="Done">Done</span> </mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </ng-container>
            <!-- wypełniacz filler  -->

            <ng-container matColumnDef="filler">
              <th mat-header-cell *matHeaderCellDef> filler </th>
              <td class="idCell" mat-cell *matCellDef="let row; let index = index">

              </td>

            </ng-container>


          </table>
        </form>
      </div>
      <div class="Footer">
        <div>
          <button mat-raised-button (click)="create()" class="add-button">
            Add Team
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- one chyba zostają tylko flex bez col w row -->
<!-- g-0 odpowiada za brak paddingu -->

<!-- <div>
    <pre>{{ form.value | json }}</pre>
  </div>
</div> -->